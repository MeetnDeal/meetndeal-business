<mat-toolbar color="primary" class="toolbar">
  <div class="logo-container" (click)="goToMainPage()">
    <img src="assets/logo.png" alt="MeetnDeal Logo" class="toolbar-logo" />
  </div>
  <span class="spacer"></span>
  <div class="user-section" [matMenuTriggerFor]="menu">
    <div class="avatar">{{ userInitial }}</div>
  </div>
</mat-toolbar>

<mat-menu #menu="matMenu" class="profile-menu">
  <div class="menu-header">
    <div class="menu-avatar">{{ userInitial }}</div>
    <div class="menu-user-info">
      <div class="menu-vendor-id">ID: {{ tempVendorId }}</div>
      <div class="menu-mobile">{{ userMobile }}</div>
    </div>
  </div>
  <mat-divider></mat-divider>
  <button mat-menu-item (click)="logout()">
    <mat-icon>logout</mat-icon>
    <span>Logout</span>
  </button>
</mat-menu>

<div class="container">
  <div class="left-panel">
    <h3>Register As:</h3>
    <mat-radio-group [(ngModel)]="registrationType" (change)="handleToggleChange()">
      <mat-radio-button value="Individual">Individual</mat-radio-button>
      <mat-radio-button value="Business">Business Owner</mat-radio-button>
    </mat-radio-group>

    <div class="steps">
      <div [class.active]="currentStep === 'A'" (click)="goToStep('A')" class="step-item">
        <span class="step-letter">A</span>
        <span class="step-text">Basic Info</span>
      </div>
      <div [class.active]="currentStep === 'B'" (click)="goToStep('B')" class="step-item">
        <span class="step-letter">B</span>
        <span class="step-text">Identity Verification</span>
      </div>
      <div [class.active]="currentStep === 'C'" (click)="goToStep('C')" class="step-item">
        <span class="step-letter">C</span>
        <span class="step-text">Business Details</span>
      </div>
      <div [class.active]="currentStep === 'D'" (click)="goToStep('D')" class="step-item">
        <span class="step-letter">D</span>
        <span class="step-text">Availability</span>
      </div>
      <div [class.active]="currentStep === 'E'" (click)="goToStep('E')" class="step-item">
        <span class="step-letter">E</span>
        <span class="step-text">Payment</span>
      </div>
    </div>
  </div>

  <div class="right-panel">
    <form [formGroup]="vendorForm">
      <app-step-a-basic-info
        *ngIf="currentStep === 'A'"
        [form]="basicInfoForm"
        [tempVendorId]="tempVendorId"
        (next)="goToStep('B')"
      ></app-step-a-basic-info>

      <app-step-b-identity-verification
        *ngIf="currentStep === 'B'"
        [form]="identityVerificationForm"
        [onFileSelect]="onFileSelect"
        [goToStep]="goToStep"
      ></app-step-b-identity-verification>

      <app-business-details
        *ngIf="currentStep === 'C' || currentStep === 'D'"
        [vendorForm]="vendorForm"
        [currentStep]="currentStep"
        (goToStep)="goToStep($event)"
      ></app-business-details>

      <app-step-e-payment
        *ngIf="currentStep === 'E'"
        [form]="paymentDetailsForm"
        (previous)="goToStep('D')"
        (submit)="onFinalSubmit()"
      ></app-step-e-payment>
    </form>
  </div>
</div>

<!-- Business Modal -->
<div class="modal-overlay" *ngIf="showBusinessModal">
  <div class="modal">
    <h3>Business Registration Paused</h3>
    <p>We're not accepting registrations from Business Owners at the moment.</p>
    <p>You may still register as an <strong>Individual</strong>.</p>
    <p>Contact <strong>support meetndeal.com</strong> for more information.</p>
    <button mat-flat-button color="primary" (click)="continueAsIndividual()">Continue as Individual</button>
  </div>
</div>

<!-- Success Modal -->
<div class="modal-overlay" *ngIf="showSuccessModal">
  <div class="modal success-modal">
    <div class="success-icon">âœ“</div>
    <h3>Registration Successful!</h3>
    <p>Thank you for registering with MeetnDeal.</p>
    <p>Your registration number is: <strong>{{ registrationNumber }}</strong></p>
    <p>Your details have been sent to admin for verification.</p>
    <p>You will receive an email confirmation shortly.</p>
    <button mat-flat-button color="primary" (click)="closeSuccessModal()">Start New Registration</button>
  </div>
</div>