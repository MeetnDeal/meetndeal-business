<mat-toolbar color="primary" class="toolbar">
  <img src="assets/logo.png" alt="MeetnDeal Logo" class="toolbar-logo" />
  <span class="brand">MeetnDeal Dashboard</span>
  <span class="spacer"></span>
  <div class="user-section" [matMenuTriggerFor]="menu">
    <div class="avatar">{{ userInitial }}</div>
  </div>
</mat-toolbar>

<mat-menu #menu="matMenu">
  <button mat-menu-item (click)="logout()">Logout</button>
</mat-menu>

<div class="container">
  <div class="left-panel">
    <h3>Register As:</h3>
    <mat-radio-group [(ngModel)]="registrationType" (change)="handleToggleChange()">
      <mat-radio-button value="Individual">Individual</mat-radio-button>
      <mat-radio-button value="Business">Business Owner</mat-radio-button>
    </mat-radio-group>

    <div class="steps">
      <div [class.active]="currentStep === 'A'" (click)="goToStep('A')">A. Basic Info</div>
      <div [class.active]="currentStep === 'B'" (click)="goToStep('B')">B. Identity Verification</div>
      <div [class.active]="currentStep === 'C'" (click)="goToStep('C')">C. Business Details</div>
      <div [class.active]="currentStep === 'D'" (click)="goToStep('D')">D. Availability</div>
      <div [class.active]="currentStep === 'E'" (click)="goToStep('E')">E. Payment</div>
    </div>
  </div>

  <div class="right-panel">
    <form [formGroup]="vendorForm">
      <app-step-a-basic-info
        *ngIf="currentStep === 'A'"
        [form]="basicInfoForm"
        (next)="goToStep('B')"
        (fileSelected)="onFileSelect($event, 'profilePhotoUrl')"
      ></app-step-a-basic-info>

      <app-step-b-identity-verification
        *ngIf="currentStep === 'B'"
        [formGroup]="identityVerificationForm"
        [onFileSelect]="onFileSelect"
        [goToStep]="goToStep"
      ></app-step-b-identity-verification>

      <app-business-details
        *ngIf="currentStep === 'C'"
        [vendorForm]="vendorForm"
        (goToStep)="goToStep($event)"
        (finalSubmit)="onFinalSubmit()"
      ></app-business-details>
    </form>
  </div>
</div>

<!-- Modal -->
<div class="modal-overlay" *ngIf="showBusinessModal">
  <div class="modal">
    <h3>Business Registration Paused</h3>
    <p>We're not accepting registrations from Business Owners at the moment.</p>
    <p>You may still register as an <strong>Individual</strong>.</p>
    <p>Contact <strong>support meetndeal.com</strong> for more information.</p>
    <button mat-flat-button color="primary" (click)="registrationType = 'Individual'; showBusinessModal = false">Continue as Individual</button>
  </div>
</div>